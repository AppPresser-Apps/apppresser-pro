import{r as t,h as o,H as e}from"./p-a190c3e1.js";import{C as r,a as s,b as a}from"./p-7e321e49.js";import{a as i}from"./p-ac8f2b47.js";import{k as n}from"./p-5147e882.js";import{A as c}from"./p-39b01977.js";import"./p-94c4dcf6.js";import"./p-2d180048.js";import"./p-9b3d931a.js";import"./p-67e2a233.js";import"./p-28e84784.js";import"./p-c6c17ec1.js";class p{async promptAttachment(){const t=i("desktop");(await n.create({header:"Choose an image",buttons:[{text:"From Library",handler:()=>t?this.getPhotoFromFileSystem():this.getPhoto(r.Photos)},{text:"From Camera",handler:()=>this.getPhoto(r.Camera)}],backdropDismiss:!1})).present()}async getPhoto(t){const o=await s.getPhoto({allowEditing:!0,resultType:a.Base64,source:t});console.log(o.webPath);const e=this.b64toBlob(o.base64String,"image/jpeg",512);c.attachments=[...c.attachments,e]}async getPhotoFromFileSystem(){const t=document.createElement("input");t.setAttribute("accept","image/*"),t.setAttribute("type","file"),t.addEventListener("change",(()=>{const o=t.files[0];if(console.log(o),o){const t=URL.createObjectURL(o);console.log(t),c.attachments=[...c.attachments,o]}})),t.click()}b64toBlob(t,o,e){o=o||"",e=e||512;for(var r=atob(t),s=[],a=0;a<r.length;a+=e){for(var i=r.slice(a,a+e),n=new Array(i.length),c=0;c<i.length;c++)n[c]=i.charCodeAt(c);var p=new Uint8Array(n);s.push(p)}return new Blob(s,{type:o})}}const m=class{constructor(o){t(this,o),this.AttachmentService=new p}render(){return o(e,null,o("ion-button",{onClick:()=>this.AttachmentService.promptAttachment()},o("ion-icon",{name:"camera",color:"medium"})))}};m.style="attachment-button{display:block}";const l=class{constructor(o){t(this,o)}removeAttachment(t){const o=c.attachments.filter((o=>t!==o));c.attachments=[...o]}formatImage(t){return URL.createObjectURL(t)}render(){return o(e,null,o("div",{style:{display:"flex",padding:"15px 10px"}},c.attachments.map((t=>o("div",{style:{width:"120px",height:"120px",margin:"0 5px","border-radius":"6px","background-image":`url(${this.formatImage(t)})`,"background-size":"cover","background-position":"center"}},o("div",{style:{padding:"5px",height:"44px",width:"44px"},onClick:()=>this.removeAttachment(t)},o("div",{style:{height:"18px",width:"18px","background-color":"rgba(0,0,0, 0.5)","border-radius":"50%",display:"flex","justify-content":"center","align-items":"center"}},o("ion-icon",{name:"close",color:"light"}))))))))}};l.style="attachments-grid{display:block}";export{m as attachment_button,l as attachments_grid}