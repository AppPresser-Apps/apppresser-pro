import{W as t}from"./p-94c4dcf6.js";import"./p-2d180048.js";class s extends t{constructor(){super(...arguments),this.group="CapacitorStorage"}async configure({group:t}){"string"==typeof t&&(this.group=t)}async get(t){return{value:this.impl.getItem(this.applyPrefix(t.key))}}async set(t){this.impl.setItem(this.applyPrefix(t.key),t.value)}async remove(t){this.impl.removeItem(this.applyPrefix(t.key))}async keys(){return{keys:this.rawKeys().map((t=>t.substring(this.prefix.length)))}}async clear(){for(const t of this.rawKeys())this.impl.removeItem(t)}async migrate(){var t;const s=[],e=[],i="_cap_",r=Object.keys(this.impl).filter((t=>0===t.indexOf(i)));for(const a of r){const r=a.substring(i.length),n=null!==(t=this.impl.getItem(a))&&void 0!==t?t:"",{value:o}=await this.get({key:r});"string"==typeof o?e.push(r):(await this.set({key:r,value:n}),s.push(r))}return{migrated:s,existing:e}}async removeOld(){const t=Object.keys(this.impl).filter((t=>0===t.indexOf("_cap_")));for(const s of t)this.impl.removeItem(s)}get impl(){return window.localStorage}get prefix(){return"NativeStorage"===this.group?"":`${this.group}.`}rawKeys(){return Object.keys(this.impl).filter((t=>0===t.indexOf(this.prefix)))}applyPrefix(t){return this.prefix+t}}export{s as PreferencesWeb}