import{o as e}from"./p-78d67758.js";import{s as t}from"./p-f03d831c.js";import{P as a}from"./p-c8e2e9a8.js";class s{constructor(e){this.url=e.url}updateState(e="",a=[]){switch(e){case"activity":t.buddypress.activity=a;break;case"user_activity":t.buddypress.user_activity=a;break;case"activity_item":t.buddypress.activity_item=a;break;case"members":t.buddypress.members=a;break;case"groups":t.buddypress.groups=a}}async getMembers(t={}){const a=this.url,s=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var n=new Request(`${a}/wp-json/buddypress/v1/members${e(t)}`,{method:"GET",headers:new Headers(s)});return(await fetch(n)).json()}async getGroupMembers(t,a={}){const s=this.url,n=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var i=new Request(`${s}/wp-json/buddypress/v1/${t}/members${e(a)}`,{method:"GET",headers:new Headers(n)});return(await fetch(i)).json()}async getMemberByUsername(t={}){const a=this.url,s=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var n=new Request(`${a}appp/v1/member${e(t)}`,{method:"GET",headers:new Headers(s)});return(await fetch(n)).json()}async getxProfile(t={}){const a=this.url,s=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var n=new Request(`${a}/wp-json/buddypress/v1/xprofile/groups${e(t)}`,{method:"GET",headers:new Headers(s)});return(await fetch(n)).json()}async getActivity(t={}){const a=this.url,s=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var n=new Request(`${a}/wp-json/buddypress/v1/activity${e(t)}`,{method:"GET",headers:new Headers(s)});const i=await fetch(n);return await i.json()}async addActivity(t={}){const a=this.url,s=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var n=new Request(`${a}/wp-json/buddypress/v1/activity${e(t)}`,{method:"POST",headers:new Headers(s)});return(await fetch(n)).json()}async deleteActivity(t,a={}){const s=this.url,n=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var i=new Request(`${s}/wp-json/buddypress/v1/activity/${t}${e(a)}`,{method:"DELETE",headers:new Headers(n)});return(await fetch(i)).json()}async flagContent(t={}){const a=this.url,s=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var n=new Request(`${a}/wp-json/appp/v1/flag/${e(t)}`,{method:"POST",headers:new Headers(s)});return(await fetch(n)).json()}async favActivity(t,a={}){const s=this.url,n=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var i=new Request(`${s}/wp-json/buddypress/v1/activity/${t}/favorite${e(a)}`,{method:"POST",headers:new Headers(n)});return(await fetch(i)).json()}async getGroups(t={}){const a=this.url,s=await this.getAuthHeaders(),n=Object.assign(Object.assign({},s),{"Content-Type":"application/json"});s&&(t.populate_extras=!0);var i=new Request(`${a}/wp-json/buddypress/v1/groups${e(t)}`,{method:"GET",headers:new Headers(n)});return console.log(i),(await fetch(i)).json()}async moderateUser(t={}){const a=this.url;let s={headers:Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"}),method:"POST"};try{return(await fetch(`${a}/wp-json/buddypress/v1/moderate${e(t)}`,s)).json()}catch(e){window.console.log(e)}}async activateUser(t,a={}){const s=this.url;let n={headers:{"Content-Type":"application/json"},method:"PUT"};try{const i=await fetch(`${s}/wp-json/buddypress/v1/signup/activate/${t}/${e(a)}`,n);return window.console.log("activate",i),i.json()}catch(e){return window.console.log("activate",e),e.json()}}async resetPassword(t={}){const a=this.url;let s={headers:{"Content-Type":"application/json"},method:"PUT"};try{const n=await fetch(`${a}/wp-json/appp/v1/reset-password/${e(t)}`,s);return window.console.log("reset password",n),n.json()}catch(e){window.console.log("reset password",e)}}async getBlockUsers(t={}){const a=this.url;let s={headers:Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"}),method:"GET"};try{return(await fetch(`${a}/wp-json/buddypress/v1/blocked${e(t)}`,s)).json()}catch(e){window.console.log(e)}}async getToken(){const e=await a.get({key:"auth"});return!!e.value&&JSON.parse(e.value).token}async getUserId(){const e=(await a.get({key:"auth"})).value;return console.log("userData",e),JSON.parse(e).user_id}async getAuthHeaders(){const e=(await a.get({key:"auth"})).value,t=!!e&&await JSON.parse(e).token;return t?{Authorization:`Bearer ${t}`}:{}}async getFriendshipRequests(t={}){const a=this.url,s=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var n=new Request(`${a}/wp-json/buddypress/v1/friends/${e(Object.assign({is_confirmed:0},t))}`,{method:"GET",headers:new Headers(s)});return(await fetch(n)).json()}async acceptFriendship(e){const t=this.url,a=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var s=new Request(`${t}/wp-json/buddypress/v1/friends/${e}`,{method:"PUT",headers:new Headers(a)});return(await fetch(s)).json()}async rejectFriendship(e){const t=this.url,a=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var s=new Request(`${t}/wp-json/buddypress/v1/friends/${e}`,{method:"DELETE",headers:new Headers(a)});return(await fetch(s)).json()}async getProfileFields(){const t=this.url,a=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"}),s={fetch_field_data:!0,user_id:await this.getUserId()};console.log("headers",a);const n=new Request(`${t}/wp-json/buddypress/v1/xprofile/fields${e(s)}`,{method:"GET",headers:new Headers(a)}),i=await fetch(n);return await i.json()}async deleteProfileData(e){const t=this.url,a=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"}),s=await this.getUserId(),n=new Request(`${t}/wp-json/buddypress/v1/xprofile/${e}/data/${s}`,{method:"DELETE",headers:new Headers(a)}),i=await fetch(n),r=await i.json();if(i.status>=400)throw r;return r}async saveProfileData(e,t){const a=this.url,s=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"}),n=await this.getUserId(),i=new Request(`${a}/wp-json/buddypress/v1/xprofile/${e}/data/${n}`,{method:"POST",headers:new Headers(s),body:JSON.stringify({value:t,context:"edit"})}),r=await fetch(i),o=await r.json();if(r.status>=400)throw o;return o}async joinGroup(e){const t=this.url,a=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var s=new Request(`${t}/wp-json/buddypress/v1/groups/${e}/members`,{method:"POST",headers:new Headers(a)});const n=await fetch(s);if(n.status>=400)throw n.json();return n.json()}async leaveGroup(e){const t=this.url,a=await this.getUserId(),s=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var n=new Request(`${t}/wp-json/buddypress/v1/groups/${e}/members/${a}`,{method:"DELETE",headers:new Headers(s)});const i=await fetch(n);if(i.status>=400)throw i.json();return i.json()}async getAchievements(t={type:"badges"}){const a=this.url,s={"Content-Type":"application/json"};await this.getUserId()&&Object.assign(s,await this.getAuthHeaders());var n=new Request(`${a}/wp-json/buddypress/v1/achievements${e(t)}`,{headers:new Headers(s)});const i=await fetch(n);if(i.status>=400)throw i.json();return i.json()}async getUserAchievements(){const e=await this.getUserId();return this.getAchievements({user:e,type:"badges"})}async getLeaderBoard(){const e=this.url,t=Object.assign(Object.assign({},await this.getAuthHeaders()),{"Content-Type":"application/json"});var a=new Request(`${e}/wp-json/buddypress/v1/leaderboard`,{headers:new Headers(t)});const s=await fetch(a);if(s.status>=400)throw s.json();return s.json()}async uploadAttachmentActivity(t={}){const a=this.url,s=Object.assign({},await this.getAuthHeaders()),n=new FormData;n.append("context","edit"),n.append("action","bp_activity_attachment_upload"),"attachments"in t&&t.attachments.map((e=>{const t=Date.now(),a=new File([e],"image/png"===e.type?`${t}.png`:`${t}.jpg`,{type:e.type});n.append("files[]",a)})),delete t.attachments;var i=new Request(`${a}/wp-json/buddypress/v1/activity${e(t)}`,{method:"POST",headers:new Headers(s),body:n});return(await fetch(i)).json()}}export{s as B}